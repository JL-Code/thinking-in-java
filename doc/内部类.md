# å†…éƒ¨ç±»
> åœ¨ä¸€ä¸ªç±»çš„å†…éƒ¨ä»¥æŸç§å½¢å¼ï¼ˆæˆå‘˜ã€é™æ€æˆå‘˜ã€å±€éƒ¨ä½œç”¨åŸŸï¼‰å®šä¹‰å¦ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬å°†è¿™ç§â€œå¦ä¸€ä¸ªç±»â€ç§°ä¸ºâ€œä¸€ä¸ªç±»â€çš„å†…éƒ¨ç±»ã€‚å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»ä¸­ä»»æ„æˆå‘˜ï¼ˆåŒ…æ‹¬ private ä¿®é¥°çš„æˆå‘˜ï¼‰ã€‚

ğŸ¤” æ€è€ƒé—®é¢˜ï¼š
1. å¦‚ä½•å®ä¾‹åŒ–å†…éƒ¨ç±»å¯¹è±¡ï¼Ÿ
2. å†…éƒ¨ç±»ä¸å¤–éƒ¨ç±»æˆå‘˜é‡åæ—¶å¦‚ä½•è®¿é—®ï¼Ÿ
## 1. åº”ç”¨åœºæ™¯
1. å¤šç»§æ‰¿å®ç°

## 2. æˆå‘˜å†…éƒ¨ç±»

#### å®šä¹‰
> å†…éƒ¨ç±»ä½œä¸ºå¤–éƒ¨ç±»çš„ä¸€ä¸ªæˆå‘˜ã€‚

#### ç‰¹æ€§
1. æˆå‘˜å†…éƒ¨ç±»æ— æ³•æ‹¥æœ‰ `static` ä¿®é¥°çš„æˆå‘˜å’Œæ–¹æ³•ã€‚
2. æˆå‘˜å†…éƒ¨ç±»ä½œä¸ºå¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œæ‰€æœ‰å®ä¾‹å†…éƒ¨ç±»å‰ï¼Œå¿…é¡»å…ˆå®ä¾‹å¤–éƒ¨ç±»ã€‚

#### ä»£ç ç¤ºä¾‹
> æˆå‘˜å†…éƒ¨ç±»
```java
public class Outer {
    private String name;  // é‡åæˆå‘˜  
    private String outerField;

    public void outerMethodName() {
        System.out.println("æˆ‘æ˜¯å¤–éƒ¨ç±»æ–¹æ³•");
    }

    class Inner {
        private String name; // é‡åæˆå‘˜
        private String innerField;

        public void innerMethod(String name) { // é‡åæˆå‘˜
            System.out.println("æˆ‘æ˜¯å†…éƒ¨ç±»æ–¹æ³•");
            // å†…éƒ¨ç±»ä¸­è®¿é—®æ–¹æ³•å½¢å‚ã€è‡ªèº«ç±»æˆå‘˜ã€å¤–éƒ¨ç±»æˆå‘˜
            System.out.println(name); // æ–¹æ³•å½¢å‚å¯ç›´æ¥è®¿é—®ã€‚
            System.out.println(this.name); // è‡ªèº«æˆå‘˜é€šè¿‡ this.å±æ€§åè®¿é—®ã€‚
            // Outer.this è¡¨ç¤º Outer çš„å®ä¾‹
            System.out.println(Outer.this.name); // å¤–éƒ¨ç±»æˆå‘˜é€šè¿‡ OuterClassName.this è·å–åˆ°å¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡ å®ä¾‹.å±æ€§åè®¿é—®ã€‚
        }
    }
}
// =============æµ‹è¯•ä»£ç =============
class OuterInnerTest {
    void test() {
        Outer outer = new Outer();
        // é€šè¿‡ outer å®ä¾‹åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹
        Outer.Inner inner = outer.new Inner();
        inner.innerMethod();
    }
}


```
ğŸ‘†ä¸Šé¢ä»£ç ç¼–è¯‘åå¾—åˆ°ä¸¤ä¸ªç‹¬ç«‹çš„å­—èŠ‚ç æ–‡ä»¶ï¼š
```text
Outer.class 
Outer$Inner.class
```

## 3. å±€éƒ¨å†…éƒ¨ç±»

> å®šä¹‰åœ¨æ–¹æ³•å†…éƒ¨æˆ–ä½œç”¨åŸŸä¸­çš„ç±»ã€‚

#### ç‰¹æ€§

1. å±€éƒ¨å†…éƒ¨ç±»**è®¿é—®çˆ¶ç±»æˆå‘˜æ— é™åˆ¶**ã€‚
2. å±€éƒ¨å†…éƒ¨ç±»**æ²¡æœ‰ä¿®é¥°ç¬¦**ã€‚

#### ä»£ç ç¤ºä¾‹
```java
public class LocalInnerClassParent {
    public LocalInnerClass() {} // æ˜¾å¼å£°æ˜æ— å‚æ„é€ å‡½æ•°
    public Object build(boolean inner) {
        if (inner) {
            // å®šä¹‰åœ¨å±€éƒ¨ä½œç”¨åŸŸçš„ç±»ï¼Œç§°ä¸ºå±€éƒ¨å†…éƒ¨ç±»ã€‚
            class LocalInnerClass {
                private int id;
                private String name;
                private String localInnerClassName;
                public LocalInnerClass(int id, String name, String localInnerClassName) {
                    this.id = id;
                    this.name = name;
                    this.localInnerClassName = localInnerClassName;
                }
            }
            return new LocalInnerClass(1, "jiangy", "LocalInnerClass");
        }
        return null;
    }
}
// æµ‹è¯•ä»£ç 
@Test
public void testLocalInnerClassParent() {
    LocalInnerClassParent parent = new LocalInnerClassParent();
    Object build = parent.build(true);

    Assertions.assertNotNull(build);
}
```

![image-20200720224605419](D:\Workspace\java-example\doc\assets\image-20200720224605419.png)

> æç¤ºï¼šthis$0 æ˜¯åŒ¿åå†…éƒ¨ç±»éšå¼æŒæœ‰çš„ä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡ï¼Œ`LocalInnerClassParent@1599` ã€‚ 

## 4. é™æ€å†…éƒ¨ç±» 

> ä»¥ `static` ä¿®é¥°çš„æˆå‘˜å†…éƒ¨ç±»ã€‚

#### ç‰¹æ€§
1. é™æ€ç±»çš„å®ä¾‹åŒ–ä¸éœ€è¦å®ä¾‹åŒ–å¤–éƒ¨ç±»ï¼Œå¯ä»¥ç›´æ¥ `new å¤–éƒ¨ç±».å†…éƒ¨ç±»()`ã€‚
2. é™æ€å†…éƒ¨ç±»åªèƒ½è®¿é—®å¤–éƒ¨ç±» `static` ä¿®é¥°çš„æˆå‘˜æˆ–æ–¹æ³•ã€‚

#### ä»£ç ç¤ºä¾‹
```java
class Outer{
    private String outerField;
    private static String staticField;

    public void outerMethodName() {
        System.out.println("æˆ‘æ˜¯å¤–éƒ¨ç±»æ–¹æ³•");
    }

    // é™æ€åŒ¿åç±»
    static class StaticInner {
        private String staticInnerPropName;
        private static String staticField;
        public void staticInnerMethodName() {
            System.out.println("staticInner staticInnerPropNameï¼š" + this.staticInnerPropName);
            System.out.println("outer staticFieldï¼š" + Outer.staticField);
        }
    }
}
// =============æµ‹è¯•ä»£ç =============
class OuterInnerTest {
    void test() {
        // éé™æ€åŒ¿åç±»å®ä¾‹åŒ–
        Outer outer = new Outer();
        Outer.Inner inner = outer.new Inner();
        inner.innerMethod();

        // é™æ€åŒ¿åç±»å®ä¾‹åŒ–
        // é¢å¤–çš„çŸ¥è¯†ç‚¹ï¼šC# ä¸­é™æ€ç±»æ˜¯æ— æ³•å®ä¾‹åŒ–çš„ï¼ˆå¹¶ä¸”æ‰€æœ‰çš„æˆå‘˜å¿…é¡»ä¹Ÿæ˜¯é™æ€çš„ï¼‰ã€‚
        Outer.StaticInner staticInner = new Outer.StaticInner();
        staticInner.staticInnerMethodName();
    }
}
```

## 5. åŒ¿åå†…éƒ¨ç±»

#### ç‰¹æ€§
1. æ–¹æ³•å½¢å‚å¿…é¡»ä½¿ç”¨ `final` ä¿®é¥°ï¼ˆ**JDK 1.7+** ç¼–è¯‘å™¨è‡ªåŠ¨åŠ ä¸Š `final`ï¼‰ã€‚
2. åŒ¿åå†…éƒ¨ç±»**æ²¡æœ‰ä¿®é¥°ç¬¦** ã€‚
3. åŒ¿åå†…éƒ¨ç±»**æ²¡æœ‰æ„é€ å‡½æ•°**ã€‚
4. åŒ¿åå†…éƒ¨ç±»æ˜¯ä¸€æ¬¡æ€§çš„ï¼ˆç±»çš„å®šä¹‰ä¸èƒ½é‡ç”¨ï¼‰ã€‚
5. åŒ¿åå†…éƒ¨ç±»ä¸èƒ½æ˜¯æŠ½è±¡çš„ï¼Œå®ƒå¿…é¡»è¦å®ç°ç»§æ‰¿çš„ç±»æˆ–è€…å®ç°çš„æ¥å£çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ã€‚
6. åŒ¿åå†…éƒ¨ç±»**å±äºå±€éƒ¨å†…éƒ¨ç±»**ï¼Œå±€éƒ¨å†…éƒ¨ç±»æ‹¥æœ‰çš„é™åˆ¶ï¼ŒåŒ¿åå†…éƒ¨ç±»åŒæ ·æ‹¥æœ‰ã€‚


#### è¯­æ³•
```text
new æ¥å£[çˆ¶ç±»](){
    // ç±»ä¸»ä½“å†…å®¹
}
```

#### ä»£ç ç¤ºä¾‹
```java
// åœ°å€æ¥å£
public interface IAddress {
    public String getProvince();
    public String getCity();
    public String getCounty();
}
// =============æµ‹è¯•ä»£ç =============
class AnonymityClassTest{
    private String propName;
    void test(){
        // å®ä¾‹åŒ–ä¸€ä¸ªåœ°å€åŒ¿åç±»
        IAddress address = new IAddress() {
            public String getProvince() {
                return "é‡åº†";
            }
            public String getCity() {
                return "é‡åº†";
            }
            public String getCounty() {
                return "å—å²¸åŒº";
            }
        };
        System.out.println(address.getCity());    
    }
}
```


## å‚è€ƒæ–‡æ¡£
- [javaå†…éƒ¨ç±»æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ](https://www.zhihu.com/question/26954130/answer/708467570)