# [ğŸ“’è¯¦ç»†ç‰ˆæœ¬å‚è€ƒè¯­é›€ç¬”è®°](https://www.yuque.com/mecode-7pn28/vgeyn0/whrz8d)

## 1. æ³›å‹è§£å†³çš„é—®é¢˜

> è§£å†³ç®—æ³•é‡ç”¨é—®é¢˜ï¼Œè®©ç®—æ³•é€‚ç”¨äºæ›´å¤šçš„æ•°æ®ç±»å‹ã€‚

åœ¨æ²¡æœ‰æ³›å‹å‡ºç°çš„æ—¶æœŸï¼Œç¨‹åºå‘˜ä»¬æ™®éé‡‡å– `Object` ç±»å‹ä½œä¸ºä¸ç¡®å®šç±»å‹å‚æ•°çš„ç±»å‹ï¼Œ
è¿™è™½ç„¶è§£å†³äº†ç¼–ç çš„é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†**ç±»å‹å¼ºåˆ¶è½¬æ¢é—®é¢˜ä»è€Œå¸¦äº†ç±»å‹å®‰å…¨é—®é¢˜ï¼ˆå‘ä¸‹è½¬æ¢ç±»å‹å­˜åœ¨ `ClassCastException` çš„æƒ…å†µï¼‰**ã€‚

`String` è½¬ä¸º `Integer` å°±å¯èƒ½ä¼šå‘ç”Ÿ `ClassCastException` å¼‚å¸¸ã€‚

`Message<T>` ï¼š

```java
public class Message<T> {
  T content;
  public T getContent() {
    return content;
  }
  public void setContent(T content) {
    this.content = content;
  }
  public void func() {}
}
```

* ç¼–è¯‘å™¨ç±»å‹æ£€æŸ¥
  * è®©ç±»å‹æ£€æŸ¥å°½å¯èƒ½çš„ç¼–è¯‘æ—¶æœŸå°±å‘ç°ã€‚
  `Message<String> message = new Message<>();
   message.setContent(111);` å°†ç¼–è¯‘ä¸é€šè¿‡,`Integer` ä¸ `String` ä¸åŒ¹é…ã€‚  
* å¼ºåˆ¶ç±»å‹è½¬æ¢
  * ä½¿ç”¨æ³›å‹ç±»å‹å°†ç±»å‹ä»¥å‚æ•°çš„å½¢å¼ä¼ é€’ã€‚`Message<String> message = new Message<>()` è¿™æ ·ç¼–è¯‘å™¨å°±çŸ¥é“äº† `Message` ä¸­ `content` çš„ç±»å‹ä¸º `String` ã€‚

## 2. æ³›å‹çš„å®šä¹‰ ï¼ˆGenericï¼‰

`JDK 1.5+` `Java` æä¾›äº†æ³›å‹æ¥è§£å†³ç±»å‹å¼ºåˆ¶è½¬æ¢æ‰€å¸¦æ¥çš„ç±»å‹å®‰å…¨é—®é¢˜ã€‚

æ³›å‹çš„æœ¬è´¨åœ¨äºå¯¹è±¡å¯ä»¥åœ¨è¿è¡Œæ—¶å†³å®šç±»å‹ã€‚

åœ¨ç±»å®šä¹‰æ—¶ä½¿ç”¨å ä½ç¬¦æ¥å ä½ï¼Œå½“å¯¹è±¡è¿è¡Œæ—¶å†æ¥å†³å®šå…·ä½“çš„ç±»å‹ã€‚

ä¸ºäº†å…¼å®¹ `JDK 1.5-` çš„ä»£ç ï¼Œä½¿ç”¨ `Object` ä½œä¸ºé»˜è®¤æ³›å‹ç±»å‹ã€‚

### 2.1. æ³›å‹ç±»

### 2.2. æ³›å‹æ–¹æ³•

## 3. æ³›å‹çš„æ–°é—®é¢˜

å¼•ç”¨ä¼ é€’å‚æ•°é™åˆ¶

```java
class App {
    public static void main(String[] args) {
        Message<Integer> message = new Message<Integer>();
        message.setContent(1212);
        // å¼•ç”¨ä¼ é€’ func æ–¹æ³•çš„å‚æ•°ç±»å‹å¿…é¡»æŒ‡å®šå…·ä½“æ³›å‹ç±»å‹
        func(message);
    }
    // func çš„å‚æ•°åº”è¯¥æ˜¯å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„æ³›å‹å‚æ•°ã€‚ä½†æ˜¯ç°å®æ˜¯ func çš„ç±»å‹å‚æ•°åªèƒ½æŒ‡å®šå…·ä½“æ³›å‹ç±»å‹ egï¼šMessage<Integer>ã€‚
    public static void func(Message<Integer> message) {
        message.setContent(121222);
        System.out.println(message.getContent());
    }
}
```

æ³›å‹è§£å†³äº†ç±»å‹é™åˆ¶çš„é—®é¢˜ï¼Œä½†æ˜¯å¸¦äº†å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’é—®é¢˜ï¼ˆå¼•ç”¨ç±»å‹å‚æ•°çš„ç±»å‹ä¸é€šç”¨ï¼Œä¸èƒ½åŒæ—¶æ»¡è¶³ `Message<String>` ã€ `Message<Integer>` ...ï¼‰ã€‚
ä¸ºäº†è§£å†³å¼•ç”¨ç±»å‹å‚æ•°ä¼ é€’é—®é¢˜æœ‰ä¸€ç§æ–¹æ¡ˆï¼š

1. å°† `func` çš„å‚æ•°ç±»å‹è®¾ç½®ä¸º `Object`,æ­¤æ—¶ `func` æ–¹æ³•å¯ä»¥æ¥å—ä»»æ„çš„ç±»å‹å‚æ•°ã€‚

ä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š

1. ä¸è®¾ç½®æ³›å‹ï¼Œå°†å‚æ•°ç±»å‹æ”¹ä¸º `Object`ï¼Œæ­¤æ—¶åˆå›åˆ°äº†ç±»å‹å¼ºåˆ¶è½¬æ¢çš„å®‰å…¨é—®é¢˜ã€‚

2. å‚æ•°è®¾ç½®ä¸º `Object` æ—¶ï¼Œ`func` æ–¹æ³•å†…çš„ä»£ç åˆ™å¯ä»¥å¯¹å‚æ•°è¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼ˆæ›´æ”¹æ•°æ®ï¼‰ã€‚

ä¸ºäº†è§£å†³ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ï¼ŒJava å¸¦æ¥äº† `é€šé…ç¬¦` ã€‚
> `Message<?>` ç±»å‹ä¸­ `?` ä¸ºæ— ç•Œé€šé…ç¬¦ï¼Œ`<? extends T>` è¡¨ç¤ºä¸Šç•Œé€šé…ç¬¦ï¼Œ`<? super T>` è¡¨ç¤ºä¸‹ç•Œé€šé…ç¬¦ã€‚

```java
class App{
     public static void func(Message<?> message) {
// å½“è®¾ç½®äº†é€šé…ç¬¦<?>ååˆ™æ— æ³•ä¿®æ”¹æ•°æ®
// message.setContent(121222);
            System.out.println(message.getContent());
        }
}
```

æ­¤æ—¶çš„ `func(Message<?> message)` æ–¹æ³•å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„æ³›å‹å‚æ•°ã€‚å¹¶ä¸”ç”±äº â€œ?â€ æ— ç•Œé€šé…ç¬¦è¡¨ç¤ºä»»æ„ç±»å‹ï¼Œæ‰€ä»¥ `func` æ–¹æ³•å†…çš„ä»£ç åœ¨ç¼–è¯‘æ—¶æ“ä½œæ•°æ®ã€‚

## 4. é€šé…ç¬¦

> ref: https://blog.csdn.net/justry_deng/article/details/82632090

### 4.1 `<? super T>`  ä¸‹ç•Œé€šé…ç¬¦

`<? super T>` ä¹‹æ‰€ä»¥å«ä¸‹ç•Œé€šé…ç¬¦ï¼Œæ˜¯å› ä¸º `?` æ˜¯æ‰€æœ‰ `T` çš„çˆ¶ç±»ï¼Œå³åˆ°æœ€ä¸‹é¢å°±æ˜¯ `T` äº†ã€‚

> æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥å¾€ `<? super T>` ä¸­è®¾ç½® `?` çš„å®ä¾‹ä½†æ˜¯ä¸è·å–å€¼ï¼Œ å› ä¸ºè·å¾—çš„å¯¹è±¡åªèƒ½ä»¥ `Object` æ¥æ¥æ”¶,å› ä¸ºä¸çŸ¥é“
> è·å–çš„åˆ°åº•æ˜¯ `T` çš„å“ªä¸€ä¸ªçˆ¶ç±»ï¼Œå½“ä½¿ç”¨ `Object` æ¥æ¥æ—¶ï¼Œä¼šæŸå¤±éƒ¨åˆ†è¯¥å¯¹è±¡çš„åŠŸèƒ½ã€‚

åº”ç”¨åœºæ™¯

### 4.2 `<? extends T>`  ä¸Šå±Šç•Œé…ç¬¦

`<? extends T>` ä¹‹æ‰€ä»¥å«ä¸Šç•Œé€šé…ç¬¦ï¼Œæ˜¯å› ä¸º `?` æ˜¯æ‰€æœ‰ `T` çš„å­ç±»ï¼Œå³åˆ°æœ€ä¸Šé¢å°±æ˜¯ `T` äº†ã€‚

### 4.3. æ³›å‹å ä½ç¬¦ T ä¸ é€šé…ç¬¦ ? çš„åŒºåˆ«

ç”¨é€”ï¼š

* `T` ç”¨äºå£°æ˜æ³›å‹ç±»å‹ã€‚
egï¼š `T content` å£°æ˜äº†å˜é‡ `content` çš„ç±»å‹æ˜¯ `T`ã€‚
* `?` ç”¨äºä½¿ç”¨æ³›å‹ã€‚
eg: `doSomething(Message<?> message)` å¯ä»¥è®© `doSomething` èƒ½æ¥å—ä»»æ„ç±»å‹çš„æ³›å‹å‚æ•°ï¼ˆé¿å…äº†ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼‰ï¼Œå¹¶ä¸”æ–¹æ³•å†…éƒ¨æ— æ³•ä¿®æ”¹ `message` ä¿è¯äº†æ•°æ®å®‰å…¨ã€‚

### 4.4 å°ç»“

```java
<? extends T> ç­‰ä»·äº ? extends T
<? super T> ç­‰ä»·äº T extends ?
```

* `<? extends T>` æ˜¯å°†å·¦ä¾§æ³›å‹çš„å­ç±» `?` (æˆ–å…¶æœ¬èº«)èµ‹ç»™å·¦ä¾§çš„æ³›å‹å¼•ç”¨;
* `<? super T>` åˆ™æ˜¯å°†å·¦ä¾§æ³›å‹çš„çˆ¶ç±» `?` (æˆ–å…¶æœ¬èº«)èµ‹ç»™å·¦ä¾§çš„æ³›å‹å¼•ç”¨ã€‚

> https://stackoverflow.com/questions/1368166/what-is-a-difference-between-super-e-and-extends-e

## 5. æ³›å‹çš„æ³¨æ„ç‚¹

 1. Java çš„æ³›å‹åªæ”¯æŒå¼•ç”¨ç±»å‹ï¼Œä¸æ”¯æŒåŸç”Ÿç±»å‹ã€‚
 2. JDK 1.7 åè¯­æ³•æœ‰æ›´æ”¹ï¼ŒPoint<Integer,Integer> point = new Point<>(); å…¶ä¸­ â€œ=â€ å³è¾¹çš„è¡¨è¾¾å¼ä¸éœ€è¦å†æ˜¾ç¤ºæŒ‡å®šæ³›å‹ç±»å‹ã€‚
