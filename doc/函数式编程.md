# å‡½æ•°å¼ç¼–ç¨‹

## Lambda è¡¨è¾¾å¼

> ç®€åŒ–ä»£ç ï¼Œé¿å…é¢å‘å¯¹è±¡ç»“æ„åŒ–çš„ä»£ç ã€‚

### è¦æ±‚

1. Lambda çš„ä½œç”¨å¯¹è±¡å¿…é¡»æ˜¯ interface ã€‚
2. SAM ï¼ˆSingle Abstract Methodï¼‰å•ä¸€çš„**æŠ½è±¡æ–¹æ³•**ã€‚

Lambda å½¢å¼ï¼š

```java

```

### ä½œç”¨

1. ç®€åŒ–æ¥å£ä»£ç å®ç°ï¼Œç”±ä¼ ç»Ÿé¢å‘å¯¹è±¡çš„ç»“æ„åŒ–ä»£ç å®ç°ç®€åŒ–ä¸ºå‡½æ•°å®ç°ã€‚

```java
// lambda è¡¨è¾¾å¼
IAction<String> action2 = m -> {
    System.out.println("action2ï¼š" + m);
};
// ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»“æ„åŒ–å®ç°ï¼ˆå…ˆå®šä¹‰ä¸€ä¸ªActionå®ç°IActionæ¥å£ï¼‰
IAction<String> action3 = new Action<>();
action3.execute("33");
action2.execute("22");
```

### ä»£ç ç¤ºä¾‹

```java
public interface IMessage {
    void send(String msg);
    void close();
}
```

å½“ IMessage ä¸­å­˜åœ¨å¤šä¸ªæ–¹æ³•æ—¶ç¼–è¯‘æ—¶å°±ä¼šå‡ºç°ğŸ‘‡çš„é”™è¯¯âŒã€‚

```text
Error:(27, 31) java: ä¸å…¼å®¹çš„ç±»å‹: org.example.basic.functional.IMessage ä¸æ˜¯å‡½æ•°æ¥å£
    åœ¨ æ¥å£ org.example.basic.functional.IMessage ä¸­æ‰¾åˆ°å¤šä¸ªéè¦†ç›–æŠ½è±¡æ–¹æ³•
```

## å‡½æ•°å¼æ¥å£

> å‡½æ•°å¼æ¥å£æœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œ
@FunctionalInterface æ˜¾å¼å£°æ˜æ¥å£ä¸ºå‡½æ•°å¼æ¥å£ã€‚

```java
@FunctionalInterface
public interface IFunctionalMessage {
    void send(String message);
}
```

## æ–¹æ³•å¼•ç”¨

> æ–¹æ³•å¼•ç”¨æ˜¯ä½œä¸º Lambda çš„è¡¥å……ä½¿ç”¨çš„ã€‚

### æ–¹æ³•å¼•ç”¨çš„é€šç”¨ç‰¹æ€§

> æ–¹æ³•å¼•ç”¨æ‰€ä½¿ç”¨æ–¹æ³•çš„å…¥å‚å’Œè¿”å›å€¼ä¸lambdaè¡¨è¾¾å¼å®ç°çš„å‡½æ•°å¼æ¥å£çš„å…¥å‚å’Œè¿”å›å€¼ä¸€è‡´ï¼›

### å¼•ç”¨é™æ€æ–¹æ³•ï¼šClassName::MethodName

`IFunc<Integer, String> func = String::valueOf;`

### ç±»çš„ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ ClassName :: instanceMethodName

> ç‰¹æœ‰ç‰¹æ€§ï¼šLambda è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå…¥å‚ä¸ºå®ä¾‹æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œåé¢çš„å…¥å‚ä¸å®ä¾‹æ–¹æ³•çš„å…¥å‚ä¸€è‡´ã€‚

### ç‰¹å®šå¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ object :: instanceMethodName

`IFunc2 func2 = "abc"::toUpperCase;`

### å¼•ç”¨æ„é€ æ–¹æ³•ï¼ŒClassName::new

`IFunc<String, Person> func4 = Person::new;`

```java
public class MethodReference {

    public static void main(String[] args) {
        // å¾ˆå¥‡æ€ª IAction çš„æ–¹æ³•ç­¾åè™½ç„¶å’ŒString.valueOf ç­¾åç›¸åŒï¼Œä½†æ˜¯ä¸€ä¸ªæœ‰è¿”å›å€¼ä¸€ä¸ªæ²¡æœ‰è¿”å›å€¼ä¸ºä»€ä¹ˆè¡¨è¾¾å¼ä¹Ÿèƒ½æˆç«‹ã€‚
        IAction<String> action = String::valueOf;
        // String::valueOf é™æ€æ–¹æ³•å¼•ç”¨
        IFunc<Integer, String> func = String::valueOf;
        // ç±»å‹ä»»æ„å¯¹è±¡çš„å®ä¾‹æ–¹æ³•å¼•ç”¨ï¼ˆæ­¤ç§æ–¹æ³•å¼•ç”¨æ–¹å¼æ²¡æœ‰ä¸å…·ä½“çš„å®ä¾‹è€¦åˆï¼‰ï¼Œæ³¨ï¼šå‡½æ•°å¼æ¥å£çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯è¯¥ç±»å‹å¯¹è±¡ï¼Œæ‰èƒ½å®Œæˆå¼•ç”¨ã€‚
        IFunc3<String, Integer> func3 = String::compareTo;
        IFunc3<Person, Integer> func33 = Person::compareToByName;
        // ç‰¹å®šå¯¹è±¡("abc"å­—ç¬¦ä¸²å¯¹è±¡)çš„å®ä¾‹æ–¹æ³•ï¼ˆtoUpperCase æ–¹æ³•ï¼‰å¼•ç”¨ï¼Œè¯¥æ–¹æ³•å¼•ç”¨ä¸ â€œabcâ€ å­—ç¬¦ä¸²å¯¹è±¡ä¸¥é‡è€¦åˆã€‚
        IFunc2<String> func2 = "abc"::toUpperCase;

        // Person::new æ„é€ æ–¹æ³•å¼•ç”¨
        IFunc<String, Person> func4 = Person::new;

        action.execute("action");
        String str = func.execute(100);
        String str2 = String.valueOf(100);
        System.out.println("funcï¼š" + str + "ã€lengthï¼š" + str.length());
        System.out.println("toUpperCaseï¼š" + func2.execute());
        System.out.println("func3ï¼š" + func3.execute("22", "33"));
        System.out.println("func33ï¼š" + func33.execute(new Person("jiangy"), new Person("jiangy")));
        System.out.println("func4ï¼š" + func4.execute("jiangy"));

        Person person = new Person("jiangy");
        IFunc<String, String> func5 = person::hello;
        IFunc2 func6 = person::hello;

        func5.execute("å¯¹è±¡å¼•ç”¨");
        func6.execute();
    }

}

class Person {
    private String name;

    public String getName() {
        return name;
    }

    public Person(String name) {
        this.name = name;
    }

    public String hello(String name) {
        return "hello:" + name;
    }

    public String hello() {
        return "hello:" + name;
    }

    public int compareToByName(Person another) {
        return name.compareTo(another.getName());
    }

    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                '}';
    }
}

interface IAction<T> {
    void execute(T t);
}

interface IFunc<M, N> {
    N execute(M m);
}

interface IFunc2<M> {
    M execute();
}

interface IFunc3<M, N> {
    N execute(M m1, M m2);
}

interface IFuncClassAnyObjectReference<M, N> {
    N execute(M self, M m);
}
```

## å†…ç½®å‡½æ•°å¼æ¥å£

## å‚è€ƒæ–‡æ¡£

- [ã€java8æ–°ç‰¹æ€§ã€‘æ–¹æ³•å¼•ç”¨](https://www.jianshu.com/p/62465b26818f)
